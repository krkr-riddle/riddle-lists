<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>『RIDDLE! BATTLE! SHOW!』謎一覧</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #e8f4f8, #d1e7dd, #c7d2fe);
            font-family: 'Hiragino Sans', 'ヒラギノ角ゴシック', sans-serif;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .main-title {
            font-size: 36px;
            font-weight: bold;
            color: black;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            margin-bottom: 20px;
            text-align: center;
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
        }

        .container {
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid #333;
            border-radius: 8px;
            padding: 0;
            width: 90%;
            max-width: 600px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            margin-top: 300px;
        }

        .breadcrumb {
            background: #f8f8f8;
            padding: 10px 15px;
            border-bottom: 1px solid #ddd;
            font-size: 14px;
            border-radius: 6px 6px 0 0;
        }

        .breadcrumb-info {
            font-size: 12px;
            color: #666;
            margin-top: 5px;
        }

        .breadcrumb-item {
            display: inline;
            color: #666;
        }

        .breadcrumb-item.clickable {
            color: #333;
            cursor: pointer;
            text-decoration: none;
            transition: background-color 0.2s, color 0.2s;
            padding: 2px 4px;
            border-radius: 3px;
        }

        .breadcrumb-item.clickable:hover {
            background-color: #e9ecef;
            color: #0056b3;
        }

        .content {
            padding: 20px;
        }

        .title {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .back-button {
            background: none;
            border: none;
            font-size: 18px;
            cursor: pointer;
            padding: 5px;
        }

        .description {
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .description img{
            max-width: 100%;
            height: auto;
            border-radius: 4px;
            margin: 10px 0;
            display: block;
        }

        .hint-button {
            background: #333;
            color: white;
            border: none;
            padding: 15px;
            width: 100%;
            margin-bottom: 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }

        .hint-button:hover {
            background: #555;
        }

        .hint-button:last-child {
            margin-bottom: 0;
        }

        .footer {
            text-align: center;
            margin-top: 40px;
            font-size: 12px;
            color: #666;
        }

        .answer-text {
            font-size: 16px;
            line-height: 1.6;
        }
    </style>
</head>
<body>
    <h1 class="main-title">『RIDDLE! BATTLE! SHOW!』<br>謎一覧</h1>
    <div class="container">
        <div class="breadcrumb" id="breadcrumb">
            <div id="breadcrumbPath"></div>
            <div class="breadcrumb-info" id="breadcrumbInfo" style="display: none;">※タイトルをタップするとその画面に戻流ことができます。</div>
        </div>
        
        <div class="content">
            <div class="title">
                <span id="pageTitle">『RIDDLE! BATTLE! SHOW!』謎一覧</span>
                <button class="back-button" id="backButton" onclick="goBack()" style="display: none;">←</button>
            </div>
            
            <div id="pageContent"></div>
        </div>
    </div>



    <script>
        // データの定義
        const hintData = {
            // メインページ（最初に表示されるページ）
            main: {
                title: "目次",
                description: "見たい謎のステージを選択しろ。",
                buttons: [
                    { text: "チュートリアルステージ", action: "tutorial" },
                    { text: "1st stage", action: "stage1" },
                    { text: "2nd stage", action: "stage2" },
                    { text: "3rd stage", action: "stage3" },
                ]
            },

            // ========== チュートリアルステージ一覧 ==========
            tutorial: {
                title: "チュートリアルステージ",
                description: " ",
                images: [
                    "images/tutorial/1.png",
                    "images/tutorial/2.png",
                    "images/tutorial/3.png",
                ]
            },

            // ========== 1st stage一覧 ==========
            stage1: {
                title: "1st stage",
                description: " ",
                images: [
                    "images/1st/A.png",
                    "images/1st/B.png",
                    "images/1st/C.png",
                    "images/1st/D.png",
                    "images/1st/E.png",
                ]
            },

            // ========== 2nd stage一覧 ==========
            stage2: {
                title: "2nd stage",
                description: " ",
                images: [
                    "images/2nd/F.png",
                    "images/2nd/G.png",
                    "images/2nd/H.png",
                    "images/2nd/I.png",
                ]
            },

            // ========== 3rd stage一覧 ==========
            stage3: {
                title: "3rd stage",
                description: "⚠️世界観外からのメッセージ⚠️<br>消去されてしまった3rd stageの謎がどのようなものだったか気になるかとは思います。<br>しかし、新海 清作の悩みを解消する上では一切関係がありません。<br>新海の悩みが完全に解決してからみることを推奨しています。<br>その上で3rd stageの謎を本当に見ますか？",
                buttons: [
                    { text: "本当に謎を見る", action: "stage3_riddles" },
                ]
            },

            stage3_riddles: {
                title: "3rd stage",
                description: " ",
                images: [
                    "images/3rd/J.png",
                    "images/3rd/K.png",
                    "images/3rd/L.png",
                    "images/3rd/M.png",
                    "images/3rd/N.png",
                    "images/3rd/O.png",
                ]
            },

        };

        // 現在の状態を管理
        let currentPath = ['main'];
        
        // ページを表示する関数
        function showPage(pageKey) {
        const page = hintData[pageKey];
        if (!page) return;

        document.getElementById('pageTitle').textContent = page.title;

        const content = document.getElementById('pageContent');
        content.innerHTML = '';

        let description; // ←参照できるように外に出す

        // 説明文を追加
        if (page.description) {
            description = document.createElement('div');
            description.className = 'description';
            description.innerHTML = page.description;

            if (page.image) {
            const img = document.createElement('img');
            img.src = page.image;
            img.alt = '謎画像';
            description.appendChild(img);
            }

            if (page.images && Array.isArray(page.images)) {
            page.images.forEach((src, i) => {
                const img = document.createElement('img');
                img.src = src;
                img.alt = `謎画像${i + 1}`;
                description.appendChild(img);
            });
            }

            content.appendChild(description);
        }

        // ボタンを追加（あるときだけ）
        const hasButtons = Array.isArray(page.buttons) && page.buttons.length > 0;
        if (hasButtons) {
            page.buttons.forEach(button => {
            const btn = document.createElement('button');
            btn.className = 'hint-button';
            btn.textContent = button.text;
            btn.onclick = () => navigateTo(button.action);
            content.appendChild(btn);
            });
        } else {
            // ボタンが無い＝答えページ想定：見た目だけ差をつけたいならクラスを付与
            if (description) description.classList.add('answer-text');
            // ※ content.innerHTML = '' は絶対にしない！
        }

        const backButton = document.getElementById('backButton');
        backButton.style.display = currentPath.length > 1 ? 'block' : 'none';

        updateBreadcrumb();
        }

        // ページ遷移の関数
        function navigateTo(pageKey) {
            currentPath.push(pageKey);
            showPage(pageKey);
        }

        // 戻る関数
        function goBack() {
            if (currentPath.length > 1) {
                currentPath.pop();
                showPage(currentPath[currentPath.length - 1]);
            }
        }

        // ブレッドクラムを更新する関数
        function updateBreadcrumb() {
            const breadcrumbPath = document.getElementById('breadcrumbPath');
            const breadcrumbInfo = document.getElementById('breadcrumbInfo');
            breadcrumbPath.innerHTML = '';

            currentPath.forEach((pageKey, index) => {
                const page = hintData[pageKey];
                if (!page) return;

                if (index > 0) {
                    const separator = document.createElement('span');
                    separator.textContent = ' > ';
                    breadcrumbPath.appendChild(separator);
                }

                const item = document.createElement('span');
                item.className = 'breadcrumb-item';
                item.textContent = page.title;

                // 最後の項目以外はクリック可能にする
                if (index < currentPath.length - 1) {
                    item.className += ' clickable';
                    item.onclick = () => {
                        // クリックした位置まで戻る
                        currentPath = currentPath.slice(0, index + 1);
                        showPage(currentPath[currentPath.length - 1]);
                    };
                }

                breadcrumbPath.appendChild(item);
            });

            // クリック可能な項目があるかチェックして謎表示を制御
            const hasClickableItems = currentPath.length > 1;
            breadcrumbInfo.style.display = hasClickableItems ? 'block' : 'none';
        }

        // 初期ページを表示
        showPage('main');
    </script>
</body>
</html>